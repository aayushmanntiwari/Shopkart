{% load static %}
{% load mptt_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>ShopKart</title>

	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Hind:400,700" rel="stylesheet">

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	

	<!-- Slick -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/slick.css' %}">
	<link type="text/css" rel="stylesheet" href="{% static 'css/slick-theme.css' %}">

	<!-- nouislider -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/nouislider.min.css' %}">

	<!-- Font Awesome Icon -->
	<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}">
	<link type="text/css" rel="stylesheet" href="{% static 'css/common.css' %}">
	<link type="text/css" rel="stylesheet" href="{% static 'css/cart.css' %}">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>
	<!-- HEADER -->
	<header>
		<!-- top Header -->
		<div id="top-header">
			<div class="container">
				<div class="pull-left">
					<span>Welcome to ShopKart!</span>
				</div>
				<div class="pull-right">
					<ul class="header-top-links">
						<li><a href="/seller/register"><h6 style="color: red;">Become a seller</h6></a></li>
						<li><a href="#">Store</a></li>
						<li><a href="#">Newsletter</a></li>
						<li><a href="#">FAQ</a></li>
						<li class="dropdown default-dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">ENG <i class="fa fa-caret-down"></i></a>
							<ul class="custom-menu">
								<li><a href="#">English (ENG)</a></li>
								<li><a href="#">Russian (Ru)</a></li>
								<li><a href="#">French (FR)</a></li>
								<li><a href="#">Spanish (Es)</a></li>
							</ul>
						</li>
						<li class="dropdown default-dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">USD <i class="fa fa-caret-down"></i></a>
							<ul class="custom-menu">
								<li><a href="#">USD ($)</a></li>
								<li><a href="#">EUR (€)</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- /top Header -->

		<!-- header -->
		<div id="header">
			<div class="container">
				<div class="pull-left">
					<!-- Logo -->
					<div class="header-logo">
						<a class="logo" href="#">
							<img src="{% static 'img/logo.png'}" alt="">
						</a>
					</div>
					<!-- /Logo -->

					<!-- Search -->
					<div class="header-search">
						<form>
							<input class="input search-input" type="text" placeholder="Enter your keyword">
							<select class="input search-categories">
								<option value="0">All Categories</option>
								<option value="1">Category 01</option>
								<option value="1">Category 02</option>
							</select>
							<button class="search-btn"><i class="fa fa-search"></i></button>
						</form>
					</div>
					<!-- /Search -->
				</div>
				<div class="pull-right">
					<ul class="header-btns">
						<!-- Account -->
						{% if request.user.is_authenticated %}
							<li class="header-account dropdown default-dropdown">
								<div class="dropdown-toggle" role="button" data-toggle="dropdown" aria-expanded="true">
									<div class="header-btns-icon">
										<i class="fa fa-user-o"></i>
									</div>
									<strong class="text-uppercase">HELLO,{{user.first_name}} {{user.last_name}}<i class="fa fa-caret-down"></i></strong><br>
									<strong>Last Login:</strong>{{user.last_login.date}},{{user.last_login.time}}
								</div>
								<ul class="custom-menu">
									<li><a href="#"><i class="fa fa-user-o"></i>My Account</a></li>
									<li><a href="#"><i class="fa fa-heart-o"></i>My Wishlist</a></li>
									<li><a href="#"><i class="fa fa-exchange"></i>Compare</a></li>
									<li><a href="#"><i class="fa fa-check"></i>Checkout</a></li>
									<li><a href="/logout/"><i class="fa fa-sign-out" aria-hidden="true"></i>Logout</a></li>
								</ul>
							</li>
						{% else %}
							<li class="header-account dropdown default-dropdown">
								<div class="dropdown-toggle" role="button" data-toggle="dropdown" aria-expanded="false">
									<div class="header-btns-icon">
										<i class="fa fa-user-o"></i>
									</div>
									<button type="button" class="btn btn-link" onclick='window.location.href="/login/"'>Hello,Sign In</button>
								</div>
							</li>
						{% endif %}
						<!-- /Account -->

						<!-- Cart -->
						
						<li class="header-cart dropdown default-dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
								<div class="header-btns-icon">
									<i class="fa fa-shopping-cart"></i>
									<span class="qty">{{total_products_in_cart}}</span>
								</div>
								<strong class="text-uppercase">My Cart:</strong>
								<br>
								<span>₹{{total_amount}}</span>
							</a>
							<div class="custom-menu">
								<div id="shopping-cart">
									<form method="POST" id="order-form" action="/test/">
									<div class="shopping-cart-list">
										{% if show_shopcart == True %}
											{% for order in orders %}
											   {% for varients_order in varients_orders %}
													   {% for image in images%}
													   		{% for size in sizes %}
																{% if order.varient_id == varients_order.id and varients_order.image_id == image.id and varients_order.size_id == size.id %}
																	<div class="product product-widget">
																		<input type="hidden" value="{{order.id}}" name="order_id">
																		<div class="product-thumb">
																			<img src="{{image.image.url}}" alt="">
																		</div>
																		<div class="product-body">
																			<h3 class="product-price" style="padding-left: 5px;">₹{{varients_order.price}}<span class="qty">x</span>{{order.quantity}}<span class="qty"></span></h3>
																			<h2 class="product-name"><a href="#">{{varients_order.title}},{{size.name}}</a></h2>
																		</div>
																		<!--<button type="submit" class="cancel-btn"><i class="fa fa-trash"></i></button>-->
																	</div>
																{% endif %}
															{% endfor %}
														{% endfor %}
												{% endfor %}
											{% endfor %}
										{% else %}
											<div class="product-thumb">
												<img src="" alt="">
											</div>
											<div class="product-body">
												<h3 class="product-price"><span class="qty"></span>
												<h5 class="product-name"><a href="#">Empty Cart</a></h5>
											</div>
										{% endif %}
									</div>
									</form>
									<div class="shopping-cart-btns">
										<a href="{% url 'showcart' %}">
											<button class="main-btn">View Cart</button>
										</a>
										<button class="primary-btn">Checkout <i class="fa fa-arrow-circle-right"></i></button>
									</div>
								</div>
							</div>
						</li>
						<!-- /Cart -->
						

						<!-- Mobile nav toggle-->
						<li class="nav-toggle">
							<button class="nav-toggle-btn main-btn icon-btn"><i class="fa fa-bars"></i></button>
						</li>
						<!-- / Mobile nav toggle -->
					</ul>
				</div>
			</div>
			<!-- header -->
		</div>
		<!-- container -->
	</header>
	<!-- /HEADER -->

	<!-- NAVIGATION -->
	<div id="navigation">
		<!-- container -->
		<div class="container">
			<div id="responsive-nav">
				<!-- category nav -->
				<div class="category-nav">
					<span class="category-header">Categories <i class="fa fa-list"></i></span>
					{% if showhome %}
					<ul class="category-list">
						{% recursetree parent %}
						<li class="dropdown side-dropdown">
							<a class="dropdown-toggle" {% if not node.is_leaf_node %} data-toggle="dropdown" aria-expanded="true" {% endif %} href="{{node.id}}">{{ node.title }}<i class="fa fa-angle-right"></i></a>
							
							<div class="custom-menu">
								{% if not node.is_leaf_node %}
									<ul class="list-links">
										<li class="dropdown side-dropdown">
											{{children}}
										</li>
									</ul>
								{% endif %}
							</div>
						</li>
						{% endrecursetree %}
					</ul>
					{% endif %}
				</div>
				<!-- /category nav -->

				<!-- menu nav -->
				<div class="menu-nav">
					<span class="menu-header">Menu <i class="fa fa-bars"></i></span>
					{% if shownavbar %}
					<ul class="menu-list">
						<!--<li><a href="#">Home</a></li>
						<li><a href="#">Shop</a></li>-->
						{% recursetree parent %}
						<li class="dropdown mega-dropdown">
							<a class="dropdown-toggle"data-toggle="dropdown" aria-expanded="true">{{ node.title }}<i class="fa fa-caret-down"></i></a>
							<div class="custom-menu">
								<div class="row">
									<div class="col-md-4"> 
										{% for child in childrenn %}
										<ul class="list-links">
											{% if child.parent_id == node.id %}
											<li><h5>{{child.title}}</h5></li>
												{% for subchild in subchildrenn %}
												<ul class="list-links">
													{% if subchild.parent_id == child.id %}
													<li><b>{{subchild.title}}</b></li>
													{% endif %}
												</ul>
													{% for subsubchild in subsubchildrenn %}
													<ul class="list-links">
														{% if subsubchild.parent_id == subchild.id %}
														<li><a href="{% url 'products' greatgrandparent_name=node.title grandparent_name=child.keywords parent_name=subchild.keywords child_name=subsubchild.keywords%}">{{subsubchild.title}}</a></li>
														{% endif %}
													</ul>
													{% endfor %}
												{% endfor %}
											{% endif %}
										</ul>
										{% endfor %}
										<hr class="hidden-md hidden-lg">
									</div>
								</div>
							</div>
						</li>
						{% endrecursetree %}
					</ul>
					{% endif %}
				</div>
				<!-- menu nav -->
			</div>
		</div>
		<!-- /container -->
	</div>
	<!-- /NAVIGATION -->

	{% if showhome %}
		{% block home %}
			{% include 'home.html' %}
		{% endblock  %}
	{% endif %}

	{% if showproducts %}
		{% block products %}
			{% include 'products.html' %}
		{% endblock  %}
	{% endif %}


	{% if showproductspage %}
		{% block productpage %}
			{% include 'product-page.html' %}
		{% endblock  %}
	{% endif %}


	{% if showcart %}
		{% block cart %}
				{% include 'cart.html' %}
		{% endblock  %}
	{% endif %}
	
	<!-- FOOTER -->
	<footer id="footer" class="section section-grey">
		<!-- container -->
		<div class="container">
			<!-- row -->
			<div class="row">
				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<!-- footer logo -->
						<div class="footer-logo">
							<a class="logo" href="#">
		            <img src="./img/logo.png" alt="">
		          </a>
						</div>
						<!-- /footer logo -->

						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna</p>

						<!-- footer social -->
						<ul class="footer-social">
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-instagram"></i></a></li>
							<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
							<li><a href="#"><i class="fa fa-pinterest"></i></a></li>
						</ul>
						<!-- /footer social -->
					</div>
				</div>
				<!-- /footer widget -->

				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">My Account</h3>
						<ul class="list-links">
							<li><a href="#">My Account</a></li>
							<li><a href="#">My Wishlist</a></li>
							<li><a href="#">Compare</a></li>
							<li><a href="#">Checkout</a></li>
							<li><a href="#">Login</a></li>
						</ul>
					</div>
				</div>
				<!-- /footer widget -->

				<div class="clearfix visible-sm visible-xs"></div>

				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">Customer Service</h3>
						<ul class="list-links">
							<li><a href="#">About Us</a></li>
							<li><a href="#">Shiping & Return</a></li>
							<li><a href="#">Shiping Guide</a></li>
							<li><a href="#">FAQ</a></li>
						</ul>
					</div>
				</div>
				<!-- /footer widget -->

				<!-- footer subscribe -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">Stay Connected</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor.</p>
						<form>
							<div class="form-group">
								<input class="input" placeholder="Enter Email Address">
							</div>
							<button class="primary-btn">Join Newslatter</button>
						</form>
					</div>
				</div>
				<!-- /footer subscribe -->
			</div>
			<!-- /row -->
			<hr>
			<!-- row -->
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<!-- footer copyright -->
					<div class="footer-copyright">
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					</div>
					<!-- /footer copyright -->
				</div>
			</div>
			<!-- /row -->
		</div>
		<!-- /container -->
	</footer>
	<!-- /FOOTER -->

	<!-- jQuery Plugins -->
	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/slick.min.js' %}"></script>
	<script src="{% static 'js/nouislider.min.js' %}"></script>
	<script src="{% static 'js/jquery.zoom.min.js' %}"></script>
	<script src="{% static 'js/main.js' %}"></script>
	<script>
		$(document).on('change','#post-form',function(e){
			e.preventDefault();
			$.ajax({
				type:'POST',
				/* if no error will be found then this url will be run successfully*/
				url:'{% url "ajaxcolor" %}',
				data:{
					/* this are the field name when form will be submitted*/
					product_id:$('#product_id').val(),
					varient_size_id:$('#varient_size_id').val(),
					csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
					action:'post',
				},
				data_type:'html',
				success:function (data){
					console.log("success");
					/* this will basically show the data based on the size we selected just below div size-option*/
					$('#appendHere').html(data.rendered_table);
				},
				error: function (data) {
					alert('something went wrong'+data)
				}
			});
		});
	</script>
	{% if showproductspage %}
	<script>
		$(document).on('submit','#quantity-form',function(e){
			e.preventDefault();
			$.ajax({
				type:'POST',
				/* if no error will be found then this url will be run successfully*/
				url:'{% url 'product' greatgrandparent_name=greatgrandparent_name grandparent_name=grandparent_name parent_name=parent_name child_name=child_name product_name=product_name%}',
				data:{
					/* this are the field name when form will be submitted*/
					product_id:$('#product_id').val(),
					varient_id:$('#varient_id').val(),
					varient_size_id:$('#varient_size_id').val(),
					quantity:$('#quantity').val(),
					csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
					action:'post',
				},
				data_type:'html',
				success:function (data){
					console.log("success");
				},
				error: function (data) {
					alert('something went wrong!'+data)
				}
			});
		});
	</script>
	{% endif %}

	
	
</body>

</html>
